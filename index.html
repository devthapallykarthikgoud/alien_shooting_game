<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Alien Shooter</title>
<style>
  body {
    margin: 0;
    padding: 0;
    background: #111;
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: sans-serif;
    color: white;
    overflow: hidden;
  }
  canvas {
    background: #000;
    display: block;
    width: 100vw;
    height: 80vh;
    max-width: 600px;
    border: 2px solid white;
    touch-action: none;
  }
  #scoreboard {
    margin: 10px 0;
    font-size: 22px;
  }
  .controls {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
    flex-wrap: wrap;
  }
  button {
    background: #222;
    color: white;
    border: 2px solid white;
    border-radius: 8px;
    padding: 12px 18px;
    font-size: 18px;
    cursor: pointer;
  }
  #gameOverOverlay {
    position: absolute;
    top:0; left:0;
    width:100vw; height:100vh;
    background: rgba(0,0,0,0.85);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    font-size: 28px;
    color: white;
    z-index: 10;
    display: none;
  }
  #gameOverOverlay button {
    margin-top: 20px;
    padding: 10px 16px;
    font-size: 20px;
  }
</style>
</head>
<body>
<h1>Alien Shooter</h1>
<div id="scoreboard">Score: 0</div>
<canvas id="game"></canvas>
<div class="controls">
  <button id="left">‚¨ÖÔ∏è</button>
  <button id="shoot">üî•</button>
  <button id="right">‚û°Ô∏è</button>
</div>
<div id="gameOverOverlay">
  Game Over!<br>
  <button id="restartBtn">Restart</button>
</div>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const scoreboard = document.getElementById('scoreboard');
const overlay = document.getElementById('gameOverOverlay');

canvas.width = 600;
canvas.height = 800;

let player = { x: canvas.width/2 - 25, y: canvas.height - 60, width: 50, height: 50, speed: 7 };
let bullets = [];
let aliens = [];
let alienRows = 3;
let alienCols = 6;
let alienSpeed = 1;
let score = 0;
let gameOver = false;

// --- Initialize aliens ---
function initAliens() {
    aliens = [];
    const padding = 20;
    const alienW = 40;
    const alienH = 40;
    const offsetX = (canvas.width - (alienCols * (alienW+padding)) + padding)/2;
    for(let r=0;r<alienRows;r++){
        for(let c=0;c<alienCols;c++){
            aliens.push({
                x: offsetX + c*(alienW+padding),
                y: r*(alienH+padding),
                width: alienW,
                height: alienH
            });
        }
    }
}
initAliens();

// --- Controls ---
let leftPressed=false, rightPressed=false;
document.addEventListener('keydown', e=>{
    if(e.key==='ArrowLeft') leftPressed=true;
    if(e.key==='ArrowRight') rightPressed=true;
    if(e.key==='ArrowUp'||e.key===' ') shootBullet();
});
document.addEventListener('keyup', e=>{
    if(e.key==='ArrowLeft') leftPressed=false;
    if(e.key==='ArrowRight') rightPressed=false;
});

// Mobile buttons
document.getElementById('left').addEventListener('click',()=>player.x-=player.speed);
document.getElementById('right').addEventListener('click',()=>player.x+=player.speed);
document.getElementById('shoot').addEventListener('click',()=>shootBullet());

// Swipe controls
let touchStartX=0;
canvas.addEventListener('touchstart', e=>{
    const t = e.touches[0]; touchStartX = t.clientX;
});
canvas.addEventListener('touchend', e=>{
    const t = e.changedTouches[0];
    const dx = t.clientX - touchStartX;
    if(Math.abs(dx)>20){
        if(dx>0) player.x+=player.speed; else player.x-=player.speed;
    } else {
        shootBullet();
    }
});

// --- Shoot ---
function shootBullet(){
    bullets.push({x: player.x+player.width/2-5, y: player.y, width: 10, height: 20, speed: 10});
}

// --- Update ---
function update(){
    if(gameOver) return;

    // Move player
    if(leftPressed) player.x -= player.speed;
    if(rightPressed) player.x += player.speed;
    if(player.x<0) player.x=0;
    if(player.x+player.width>canvas.width) player.x=canvas.width-player.width;

    // Move bullets
    bullets.forEach((b,i)=>{
        b.y -= b.speed;
        // Remove off-screen bullets
        if(b.y + b.height < 0) bullets.splice(i,1);
    });

    // Move aliens
    aliens.forEach(a=>{
        a.y += alienSpeed*0.5;
        if(a.y + a.height >= player.y){
            endGame();
        }
    });

    // Collision
    bullets.forEach((b,bi)=>{
        aliens.forEach((a,ai)=>{
            if(b.x < a.x+a.width && b.x+b.width > a.x &&
               b.y < a.y+a.height && b.y+b.height > a.y){
                aliens.splice(ai,1);
                bullets.splice(bi,1);
                score+=10;
                updateScore();
            }
        });
    });

    // Win condition: reset aliens if all destroyed
    if(aliens.length===0){
        alienRows++;
        alienSpeed+=0.5;
        initAliens();
    }
}

// --- Draw ---
function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Player
    ctx.fillStyle='#0DC2FF';
    ctx.fillRect(player.x, player.y, player.width, player.height);

    // Bullets
    ctx.fillStyle='#FF0D72';
    bullets.forEach(b=>ctx.fillRect(b.x,b.y,b.width,b.height));

    // Aliens
    ctx.fillStyle='#0DFF72';
    aliens.forEach(a=>ctx.fillRect(a.x,a.y,a.width,a.height));
}

function loop(){
    update();
    draw();
    if(!gameOver) requestAnimationFrame(loop);
}

// --- Score ---
function updateScore(){
    scoreboard.textContent = "Score: "+score;
}

// --- Game Over ---
function endGame(){
    gameOver=true;
    overlay.style.display='flex';
}

// --- Restart ---
document.getElementById('restartBtn').addEventListener('click',()=>{
    overlay.style.display='none';
    player = { x: canvas.width/2 - 25, y: canvas.height - 60, width: 50, height: 50, speed: 7 };
    bullets = [];
    alienRows = 3;
    alienSpeed = 1;
    score=0;
    updateScore();
    gameOver=false;
    initAliens();
    loop();
});

loop();
</script>
</body>
</html>
